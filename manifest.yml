modules:
  jiraServiceManagement:queuePage:
    - key: queue-soft-serve
      title: "Queue Page"
      resource: jsm
      resolver:
        function: resolver
      render: native

  webtrigger:
    - key: github-webhook
      function: github-hook
      events:
        - webtrigger

  jira:adminPage:
    - key: forge-soft-serve-auth
      resource: auth
      resolver:
        function: resolver
      render: native
      title: Authentication
      useAsGetStarted: true
    - key: forge-soft-serve-config-page
      resource: config
      render: native
      resolver:
        function: resolver
      title: "Config Page"
      useAsConfig: true
    - key: forge-soft-serve
      resource: main
      resolver:
        function: resolver
      render: native
      title: forge-soft-serve
  function:
    - key: resolver
      handler: index.handler
    - key: github-hook
      handler: index.gitMergeHook
resources:
  - key: auth
    path: src/frontend/auth.tsx
  - key: config
    path: src/frontend/config.tsx
  - key: main
    path: src/frontend/index.tsx
  - key: jsm
    path: src/frontend/index.tsx
app:
  runtime:
    name: nodejs22.x
    memoryMB: 256
    architecture: arm64
  id: ari:cloud:ecosystem::app/e241775e-d7de-4788-94f2-983969856a80
permissions:
  scopes:
    - read:jira-work
    - write:jira-work
    - read:jira-user
    - storage:app
    - manage:jira-project
    - manage:jira-configuration
    - manage:jira-webhook
  external:
    images:
      - address: https://secure.gravatar.com/avatar/*
      - address: https://api.atlassian.com
      - address: https://avatars.githubusercontent.com/u/*
      - address: https://avatars.githubusercontent.com
      - address: https://api.atlassian.com/ex/jira/*
    fetch:
      backend:
        - remote: git-api
      client:
        - remote: git-api
remotes:
  - key: git-api
    baseUrl: "https://api.github.com"
    operations:
      - fetch
