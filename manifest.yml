modules:
  webtrigger:
    - key: github-webhook
      function: github-hook
      events:
        - webtrigger
  jira:adminPage:
    - key: forge-soft-serve-auth
      resource: auth
      resolver:
        function: resolver
      render: native
      title: Authentication
      useAsGetStarted: true
    - key: forge-soft-serve-config-page
      resource: config
      render: native
      resolver:
        function: resolver
      title: "Config Page"
      useAsConfig: true 
    - key: forge-soft-serve
      resource: main
      resolver:
        function: resolver
      render: native
      title: forge-soft-serve
  function:
    - key: resolver
      handler: index.handler
    - key: github-hook
      handler: index.gitMergeHook
resources:
  - key: auth
    path: src/frontend/auth.tsx
  - key: config
    path: src/frontend/config.tsx
  - key: main
    path: src/frontend/index.tsx
app:
  runtime:
    name: nodejs22.x
    memoryMB: 256
    architecture: arm64
  id: ari:cloud:ecosystem::app/e241775e-d7de-4788-94f2-983969856a80
permissions:
  scopes:
    - read:status:jira
    - read:issue.transition:jira
    - read:field-configuration:jira
    - write:field-configuration:jira
    - read:jira-work
    - write:jira-work
    - storage:app
  external:
    images:
      - 'https://secure.gravatar.com/avatar/*'
      - 'https://api.atlassian.com'
      - 'https://avatars.githubusercontent.com/u/*'
      - 'https://avatars.githubusercontent.com'
    fetch:
      client:
        - remote: git-api
      backend:
        - remote: git-api
remotes:
  - key: git-api
    baseUrl: "https://api.github.com"
    operations:
      - fetch
